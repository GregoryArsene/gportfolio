function initLenis(){let e=new Lenis({lerp:.1,orientation:"vertical",wheelMultiplier:1.3,smoothWheel:!0});return requestAnimationFrame(function t(n){e.raf(n),requestAnimationFrame(t)}),e}function initMenu(e){let t=document.querySelector(".menu"),n=document.querySelector(".menu-trigger"),r={triggerText:document.querySelectorAll(".menu-trigger-text"),linkTitles:document.querySelectorAll(".menu-link-title"),primaryNavLetters:document.querySelectorAll(".primary-nav-letter"),social:document.querySelectorAll("[menu-social]")},o=!1,i=null,a=CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1");function l(e){return i&&i.kill(),i=gsap.timeline(),e?i.to(t,{x:"0%",opacity:1,duration:.8,ease:a}).to(r.triggerText,{y:"-100%",duration:.4,ease:"power2.inOut"},0).fromTo([...r.linkTitles,...r.primaryNavLetters,...r.social,],{y:"150%"},{y:"0%",duration:.5,stagger:.05,ease:a},.2):i.to(t,{opacity:0,duration:.2,ease:"power2.inOut",onComplete:()=>gsap.set(t,{x:"100%"})}).to(r.triggerText,{y:"0%",duration:.3,ease:"power2.inOut"},0),i}function s(){o||(o=!0,document.body.classList.add("menu-open"),e.stop(),l(!0))}function c(){o&&(o=!1,l(!1).then(()=>{document.body.classList.remove("menu-open"),e.start()}))}return n.addEventListener("click",e=>{e.stopPropagation(),o?c():s()}),document.addEventListener("click",e=>{o&&!t.contains(e.target)&&e.target!==n&&c()}),t.addEventListener("click",e=>e.stopPropagation()),t.querySelectorAll("a").forEach(e=>{e.addEventListener("click",t=>{let n=e.getAttribute("href");if(n){if(e.classList.contains("secondary-nav-item"))return;t.preventDefault(),c(),setTimeout(()=>barba.go(n),100)}})}),{openMenu:s,closeMenu:c}}function initBarba(e,t){barba.hooks.before(t=>{e.stop(),saveScrollPosition(t.current.url.path)}),barba.hooks.after(n=>{t(),e.start(),"back"===n.trigger||"forward"===n.trigger?restoreScrollPosition(n.next.url.path):window.scrollTo(0,0)}),barba.init({transitions:[{preventRunning:!0,async leave(){await pageEnterAnimation().catch(console.error)},enter(e){updateCurrentClass();let t=e.next.container;resetWebflow(e),gsap.to(t,{onComplete(){pageExitAnimation(),initAnimations(),initMediaControls()}})}},],prefetch:!0})}function saveScrollPosition(e){sessionStorage.setItem("scrollPosition_"+e,window.pageYOffset)}function restoreScrollPosition(e){let t=sessionStorage.getItem("scrollPosition_"+e);null!==t?window.scrollTo(0,parseInt(t)):window.scrollTo(0,0)}function initAnimations(){let e=CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1");function t(t,n){document.querySelectorAll(t).forEach(t=>{t._splitType&&SplitType.revert(t);let r=new SplitType(t,{types:"lines"});r.lines.forEach((t,r)=>{let o=document.createElement("div");o.style.overflow="hidden",t.parentNode.insertBefore(o,t),o.appendChild(t),gsap.fromTo(t,{y:n.fromY},{y:"0%",duration:n.duration,ease:e,delay:n.baseDelay+r*n.staggerDelay,scrollTrigger:n.scrollTrigger})})})}t("[line-left]",{fromY:"300%",duration:.8,baseDelay:.5,staggerDelay:.1,opacity:0}),t("[lines]",{fromY:"100%",duration:.8,baseDelay:.1,staggerDelay:.06,scrollTrigger:{trigger:".hero-project-img-container",start:"bottom 70%",once:!0,markers:!0}}),gsap.utils.toArray("[line-right]").forEach(t=>{gsap.fromTo(t,{y:"100%"},{y:"0%",duration:.8,ease:e,delay:.7})}),initMenuLinkOpacity(),initProjectPageHero(),initMediaControls()}function initMenuLinkOpacity(){document.querySelectorAll(".project-card").forEach(e=>{let t=gsap.timeline({paused:!0});t.to(e,{filter:"grayscale(100%)",duration:.3,ease:"power1.out"}),e.addEventListener("mouseenter",()=>t.play()),e.addEventListener("mouseleave",()=>t.reverse())})}function initProjectPageHero(){let e=document.querySelector(".project-hero-img");e&&gsap.timeline().to(e,{duration:1.2,scale:1,delay:.4,ease:CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1")}).to(e,{y:"-8%",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:.1,ease:"none"}})}function initMediaControls(){let e=document.getElementById("myVideo"),t=document.getElementById("playPauseBtn"),n=document.getElementById("timeRemaining");e&&t&&n&&(gsap.set([t,n],{opacity:0}),e.pause(),t.textContent="Play",e.addEventListener("click",()=>{e.paused?(e.play(),t.textContent="Pause"):(e.pause(),t.textContent="Play")}),e.addEventListener("timeupdate",()=>{let t=e.duration-e.currentTime;n.textContent=`${Math.floor(t/60).toString().padStart(2,"0")}:${Math.floor(t%60).toString().padStart(2,"0")}`}),e.addEventListener("mouseenter",()=>{gsap.to([t,n],{opacity:1,duration:.2})}),e.addEventListener("mouseleave",()=>{gsap.to([t,n],{opacity:0,duration:.2,delay:.5})}))}function pageEnterAnimation(){return gsap.timeline().set(".page-transition",{display:"block"}).to(".page-transition",{duration:.8,y:"0%",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")}).fromTo(".page-content",{y:"0vh"},{duration:.8,y:"-100vh",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")},"-=0.8").fromTo(".opacity-transition",{opacity:0,display:"block"},{opacity:.8,duration:1,ease:"linear",display:"none"},"-=1").then(()=>Promise.resolve())}function pageExitAnimation(){return gsap.timeline().set(".page-transition",{y:"0%"}).to(".page-transition",{duration:.8,y:"-100%",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")}).fromTo(".page-content",{y:"50vh"},{duration:.8,y:"0vh",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")},"-=0.8").to(".opacity-transition",{duration:1,opacity:0,ease:"linear"},"-=1").set(".page-transition",{display:"none",y:"100%"}).then(()=>Promise.resolve())}function updateCurrentClass(){document.querySelectorAll(".w-current").forEach(e=>e.classList.remove("w--current")),document.querySelectorAll(".nav a").forEach(e=>{e.getAttribute("href")===window.location.pathname&&e.classList.add("w--current")})}function resetWebflow(e){let t=new DOMParser,n=t.parseFromString(e.next.html,"text/html"),r=n.querySelector("html").getAttribute("data-wf-page");window.Webflow&&(document.documentElement.setAttribute("data-wf-page",r),window.Webflow.destroy(),window.Webflow.ready(),window.Webflow.require("ix2").init(),initAnimations())}document.addEventListener("DOMContentLoaded",()=>{let e=initLenis(),{openMenu:t,closeMenu:n}=initMenu(e);initBarba(e,n),initAnimations(),window.addEventListener("popstate",()=>setTimeout(initAnimations,0))}),barba.hooks.after(e=>{let t=document.getElementById("myVideo");t&&(t.load(),t.play())}),window.addEventListener("popstate",()=>{let e=performance.getEntriesByType("navigation")[0].type;barba.go(window.location.href,{trigger:e})});