document.addEventListener("DOMContentLoaded",()=>{let e=initLenis(),{openMenu:t,closeMenu:n}=initMenu(e);initBarba(e,n),initLinesAnimations(),initLogoReveal()});const easeInOutCubic=CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1"),easeOutExpo=CustomEase.create("custom","M0,0 C0.25,0.1 0.25,1 1,1"),easeInOutExpo=CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1");function initLenis(){let e=new Lenis({lerp:.09,orientation:"vertical",wheelMultiplier:1.6});function t(n){e.raf(n),requestAnimationFrame(t)}return requestAnimationFrame(t),e}function initMenu(e){let t=document.querySelector(".menu"),n=document.querySelector(".menu-trigger"),r={triggerText:document.querySelectorAll(".menu-trigger-text"),linkTitles:document.querySelectorAll(".menu-link-title"),social:document.querySelectorAll("[menu-social]")},i=!1,o=null;function a(e){return o&&o.kill(),o=gsap.timeline(),e?o.to(t,{x:"0%",opacity:1,duration:.8,ease:easeInOutCubic}).to(r.triggerText,{y:"-100%",duration:.5,ease:easeOutExpo},0).fromTo([...r.linkTitles,...r.social],{y:"150%"},{y:"0%",duration:.5,stagger:.05,ease:easeOutExpo},.2):o.to(t,{opacity:0,duration:.2,ease:"power2.inOut",onComplete:()=>gsap.set(t,{x:"100%"})}).to(r.triggerText,{y:"0%",duration:.3,ease:"power2.inOut"},0),o}function l(){i||(i=!0,document.body.classList.add("menu-open"),e.stop(),a(!0))}function s(){i&&(i=!1,a(!1).then(()=>{document.body.classList.remove("menu-open"),e.start()}))}return n.addEventListener("click",e=>{e.stopPropagation(),i?s():l()}),document.addEventListener("click",e=>{i&&!t.contains(e.target)&&e.target!==n&&s()}),t.addEventListener("click",e=>e.stopPropagation()),t.querySelectorAll("a").forEach(e=>{e.addEventListener("click",t=>{let n=e.getAttribute("href");n&&!e.classList.contains("secondary-nav-item")&&(t.preventDefault(),s(),queueMicrotask(()=>barba.go(n)))})}),{openMenu:l,closeMenu:s}}function initBarba(e,t){barba.hooks.before(t=>{e.stop(),saveScrollPosition(t.current.url.path)}),barba.hooks.after(n=>{t(),e.start(),"back"===n.trigger||"forward"===n.trigger?restoreScrollPosition(n.next.url.path):window.scrollTo(0,0),initMediaControls(),initProjectPageHero()}),barba.init({transitions:[{preventRunning:!0,async leave(){await pageEnterAnimation().catch(console.error)},enter(e){updateCurrentClass();let t=e.next.container;resetWebflow(e),gsap.to(t,{onComplete(){pageExitAnimation(),initLogoReveal(),initLinesAnimations(),initLabGallery()}})}},],prefetch:!0})}