const customEaseInOut=CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1"),menuLinkRevealEase=CustomEase.create("custom","M0,0 C0.25,0.1 0.25,1 1,1");function isWebflowCSSLoaded(){let e=!!document.querySelector(".page-preloader");return e}function initPreloader(){document.fonts.ready.then(()=>{if(isWebflowCSSLoaded())document.documentElement.classList.add("is-ready");else{let e=setInterval(()=>{isWebflowCSSLoaded()&&(document.documentElement.classList.add("is-ready"),clearInterval(e))},100)}})}function initLenis(){let e=new Lenis({lerp:.09,orientation:"vertical",wheelMultiplier:1.7,smoothTouch:!0,smoothWheel:!0});function t(i){e.raf(i),requestAnimationFrame(t)}return requestAnimationFrame(t),e}function initMenu(e){let t=document.querySelector(".menu"),i=document.querySelector(".menu_trigger"),n={triggerText:document.querySelectorAll(".menu_trigger_text"),linkTitles:document.querySelectorAll(".primary_nav_title"),social:document.querySelectorAll(".secondary_nav_title")},o=!1,r=null;function a(e){return r&&r.kill(),r=gsap.timeline({onComplete(){r=null}}),e?r.to(t,{x:"0%",opacity:1,duration:.8,ease:customEaseInOut}).to(n.triggerText,{y:"-100%",duration:.5,ease:menuLinkRevealEase},0).fromTo([...n.linkTitles,...n.social],{y:"150%"},{y:"0%",duration:.5,stagger:.05,ease:menuLinkRevealEase},.2):r.to(t,{opacity:0,duration:.2,ease:"power2.inOut",onComplete:()=>gsap.set(t,{x:"100%"})}).to(n.triggerText,{y:"0%",duration:.3,ease:"power2.inOut"},0),r}function s(){o||(o=!0,document.body.classList.add("menu-open"),e.stop(),a(!0))}function l(){return o?(o=!1,a(!1).then(()=>{document.body.classList.remove("menu-open"),e.start()})):Promise.resolve()}let c=e=>{if(i.contains(e.target)){e.stopPropagation(),o?l():s();return}if(o&&!t.contains(e.target)){l();return}if("A"===e.target.tagName&&t.contains(e.target)){let n=e.target,r=n.getAttribute("href");r&&!n.classList.contains("secondary_nav_link")&&(e.preventDefault(),l(),setTimeout(()=>{barba.go(r)},300))}};return document.addEventListener("click",c),{openMenu:s,closeMenu:l}}function initBarba(e,t){barba.hooks.before(t=>{e.stop(),saveScrollPosition(t.current.url.path)}),barba.hooks.after(i=>{t(),e.start(),"back"===i.trigger||"forward"===i.trigger?restoreScrollPosition(i.next.url.path):window.scrollTo(0,0),requestAnimationFrame(()=>{[initMediaControls,initProjectPageHero,initProjectDisplay,initDisplayHover,initLinesAnimations,].forEach(e=>{try{e()}catch(t){console.error(`Error in page initialization: ${e.name}`,t)}})})}),barba.init({transitions:[{preventRunning:!0,async leave(e){await pageEnterAnimation().catch(console.error)},enter(e){updateCurrentClass();let t=e.next.container;resetWebflow(e),gsap.to(t,{onComplete(){pageExitAnimation(),initLinesAnimations(),initProjectDisplay(),projectIndex()}})}},],prefetch:!0,debug:!1})}function saveScrollPosition(e){sessionStorage.setItem("scrollPosition_"+e,window.pageYOffset)}function restoreScrollPosition(e){let t=sessionStorage.getItem("scrollPosition_"+e);null!==t?window.scrollTo(0,parseInt(t)):window.scrollTo(0,0)}function initLinesAnimations(){function e(e,t){document.querySelectorAll(e).forEach(e=>{e._splitType&&SplitType.revert(e);let i=new SplitType(e,{types:"lines"});i.lines.forEach((e,i)=>{let n=document.createElement("div");n.style.overflow="hidden",e.parentNode.insertBefore(n,e),n.appendChild(e),gsap.fromTo(e,{y:t.fromY},{y:"0%",duration:t.duration,ease:customEaseInOut,delay:t.baseDelay+i*t.staggerDelay,scrollTrigger:t.scrollTrigger})})})}e("[line-text]",{fromY:"300%",duration:.8,baseDelay:.4,staggerDelay:.1}),e("[line-text-2]",{fromY:"300%",duration:.8,baseDelay:.5,staggerDelay:.1})}function initProjectDisplay(){let e=document.querySelector(".projects_display_btn.is--index"),t=document.querySelector(".projects_display_btn.is--grid"),i=document.querySelector(".index"),n=document.querySelector(".projects");e.addEventListener("click",()=>{i.style.display="block",requestAnimationFrame(()=>{i.classList.add("active"),i.classList.remove("inactive")}),n.classList.add("inactive"),n.classList.remove("active"),setTimeout(()=>{n.classList.contains("inactive")&&(n.style.display="none")},250)}),t.addEventListener("click",()=>{n.style.display="block",requestAnimationFrame(()=>{n.classList.add("active"),n.classList.remove("inactive")}),i.classList.add("inactive"),i.classList.remove("active"),setTimeout(()=>{i.classList.contains("inactive")&&(i.style.display="none")},250)})}function initDisplayHover(){let e=document.querySelector(".projects_display_btn.is--grid"),t=document.querySelector(".projects_display_btn.is--index");function i(e,t){e.classList.remove("secondary"),t.classList.add("secondary")}e.addEventListener("click",()=>i(e,t)),t.addEventListener("click",()=>i(t,e))}function projectIndex(){let e=document.querySelectorAll(".projects_index_item");e.forEach((e,t)=>{e.addEventListener("mouseenter",()=>{document.querySelector(`#index-img-${t+1}`).style.opacity="1"}),e.addEventListener("mouseleave",()=>{document.querySelector(`#index-img-${t+1}`).style.opacity="0"})})}function initProjectPageHero(){let e=document.querySelector(".project_hero_img");e&&gsap.timeline().to(e,{duration:1.2,scale:1,delay:.9,ease:customEaseInOut}).to(e,{y:"-8%",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:.1,ease:"none"}})}function initMediaControls(){let e=document.getElementById("projectVideo"),t=document.querySelector(".video_controls"),i=document.querySelector(".video_time");e&&t&&i&&(gsap.set([t,i],{opacity:1}),e.pause(),t.textContent="Play",e.addEventListener("click",()=>{e.paused?(e.play(),t.textContent="Pause"):(e.pause(),t.textContent="Play")}),e.addEventListener("timeupdate",()=>{let t=e.duration-e.currentTime;i.textContent=`${Math.floor(t/60).toString().padStart(2,"0")}:${Math.floor(t%60).toString().padStart(2,"0")}`}),e.addEventListener("mouseenter",()=>{gsap.to([t,i],{opacity:1,duration:.2})}),e.addEventListener("mouseleave",()=>{gsap.to([t,i],{opacity:0,duration:.2,delay:.5})}))}async function pageEnterAnimation(){return gsap.timeline().set(".page-transition",{display:"block"}).to(".page-transition",{duration:.8,y:"0%",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")}).fromTo(".page-content",{y:"0vh"},{duration:.8,y:"-100vh",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")},"-=0.8").fromTo(".opacity-transition",{opacity:0,display:"block"},{opacity:.8,duration:1,ease:"linear",display:"none"},"-=1")}async function pageExitAnimation(){return gsap.timeline().set(".page-transition",{y:"0%"}).to(".page-transition",{duration:.8,y:"-100%",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")}).fromTo(".page-content",{y:"50vh"},{duration:.8,y:"0vh",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")},"-=0.8").to(".opacity-transition",{duration:1,opacity:0,ease:"linear"},"-=1").set(".page-transition",{display:"none",y:"100%"})}function updateCurrentClass(){document.querySelectorAll(".w-current").forEach(e=>e.classList.remove("w--current")),document.querySelectorAll(".nav a").forEach(e=>{e.getAttribute("href")===window.location.pathname&&e.classList.add("w--current")})}function resetWebflow(e){let t=new DOMParser,i=t.parseFromString(e.next.html,"text/html"),n=i.querySelector("html").getAttribute("data-wf-page");window.Webflow&&(document.documentElement.setAttribute("data-wf-page",n),window.Webflow.destroy(),window.Webflow.ready(),window.Webflow.require("ix2").init())}barba.hooks.after(e=>{let t=document.getElementById("projectVideo");t&&(t.load(),t.play())}),window.addEventListener("popstate",()=>{let e=performance.getEntriesByType("navigation")[0].type;barba.go(window.location.href,{trigger:e}),initLinesAnimations()}),window.addEventListener("error",e=>{console.error("Uncaught error:",e.error)}),document.addEventListener("DOMContentLoaded",()=>{initPreloader();let e=document.getElementById("projectVideo");e&&requestAnimationFrame(()=>{e.load(),e.play().catch(console.error)});let t=initLenis(),{openMenu:i,closeMenu:n}=initMenu(t);requestAnimationFrame(()=>{initBarba(t,n),initLinesAnimations(),initMediaControls(),initProjectPageHero(),initProjectDisplay(),initDisplayHover(),projectIndex()})});