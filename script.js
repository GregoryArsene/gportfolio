gsap.registerPlugin(ScrollTrigger);document.addEventListener("DOMContentLoaded",function(){const lenis=new Lenis({lerp:.1,orientation:"vertical",wheelMultiplier:1.2});lenis.on("scroll",e=>{console.log(e)});function raf(time){lenis.raf(time);requestAnimationFrame(raf)}requestAnimationFrame(raf);function hideLoader(){var loader=document.querySelector(".page-loader");if(loader){loader.style.display="none"}}window.addEventListener("load",function(){var loaderTimeline=gsap.timeline();var animationDuration=1;var loaderState=document.querySelector(".page-loader_state");if(loaderState){var counter=0;var updateLoaderState=function(){loaderState.innerHTML=counter;counter++;if(counter<=100){requestAnimationFrame(updateLoaderState)}else{loaderTimeline.to(".page-loader",{duration:animationDuration,y:"-100%",ease:"expo.inOut",delay:.3});loaderTimeline.add(function(){hideLoader()})}};requestAnimationFrame(updateLoaderState)}},{once:true});const menu=document.querySelector(".menu");const headerElement=document.querySelector(".header");const menuTrigger=document.querySelector(".menu-trigger");const navLogoContainer=document.querySelector(".nav-logo-container");let isMenuOpen=false;let isAnimating=false;function openMenu(){if(!isMenuOpen&&!isAnimating){isAnimating=true;headerElement.style.mixBlendMode="normal";gsap.to(".menu-trigger-text",{y:"-100%",duration:.5,delay:0,ease:"power1.inOut"});gsap.to(menu,{y:"0%",duration:1,ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1"),display:"flex",onComplete:()=>{isAnimating=false}});let typeSplitMenuLinkTitle=new SplitType(".menu-link-title",{types:"lines, words, chars"});gsap.from(".menu-link-title .line",{y:"200%",duration:.8,ease:CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1"),stagger:.1,delay:.5});gsap.from(".menu-img",{scale:1.5,duration:1.2,delay:.4,ease:CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1")});let typeSplitMenuSocialLink=new SplitType(".menu-social-link-title",{types:"lines, words, chars",tagName:"span"});gsap.from(".menu-social-link-title .word",{y:"200%",opacity:1,duration:1,ease:CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1"),stagger:.1,delay:.6});isMenuOpen=true}}function closeMenu(){if(isMenuOpen&&!isAnimating){isAnimating=true;gsap.to(menu,{y:"-100%",duration:1,ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1"),display:"none",onComplete:()=>{headerElement.style.mixBlendMode="";isAnimating=false}});gsap.to(".menu-trigger-text",{y:"0%",duration:.4,delay:.3,ease:"power1.inOut"});isMenuOpen=false}}function handleMenuLinkHover(){const menuLinks=document.querySelectorAll(".menu-link");menuLinks.forEach(link=>{if(link!==this){gsap.to(link,{opacity:.3,duration:.3})}})}function handleMenuLinkLeave(){const menuLinks=document.querySelectorAll(".menu-link");menuLinks.forEach(link=>{gsap.to(link,{opacity:1,duration:.3})})}const menuLinks=document.querySelectorAll(".menu-link");menuLinks.forEach(link=>{link.addEventListener("mouseenter",handleMenuLinkHover);link.addEventListener("mouseleave",handleMenuLinkLeave)});menuTrigger.addEventListener("click",()=>{if(isMenuOpen){closeMenu()}else{openMenu()}});document.querySelectorAll(".menu a:not(.nav-logo-container a)").forEach(el=>{el.addEventListener("click",closeMenu)});navLogoContainer.addEventListener("click",()=>{if(isMenuOpen){closeMenu()}});document.querySelectorAll(".menu a").forEach(el=>{el.addEventListener("click",closeMenu)});initLineLeftText();initRightText();initLinesText();initMenuLinkOpacity();initProjectItem();initIndexItem();initProjectPageHero()});let animationPlayed=false;let splitElements=[];barba.hooks.afterEnter(()=>{if(!animationPlayed){initLineLeftText();initRightText();initLinesText();animationPlayed=true}});function initLineLeftText(){const elements=document.querySelectorAll("[line-left]");splitElements=[];elements.forEach(element=>{if(element._splitType){SplitType.revert(element)}const split=new SplitType(element,{types:"lines"});splitElements.push(split);split.lines.forEach((line,index)=>{const lineWrapper=document.createElement("div");lineWrapper.style.overflow="hidden";line.parentNode.insertBefore(lineWrapper,line);lineWrapper.appendChild(line);gsap.fromTo(line,{y:"300%"},{y:"0%",duration:.8,ease:CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1"),delay:.5+index*.1})})})}function initRightText(){const elements=document.querySelectorAll("[line-right]");elements.forEach(element=>{gsap.fromTo(element,{y:"100%"},{y:"0%",duration:.8,ease:CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1"),delay:.7})})}function initLinesText(){const elements=document.querySelectorAll("[lines]");splitElements=[];elements.forEach(element=>{if(element._splitType){SplitType.revert(element)}const split=new SplitType(element,{types:"lines"});splitElements.push(split);split.lines.forEach((line,index)=>{const lineWrapper=document.createElement("div");lineWrapper.style.overflow="hidden";line.parentNode.insertBefore(lineWrapper,line);lineWrapper.appendChild(line);gsap.fromTo(line,{y:"100%"},{y:"0%",duration:.8,ease:CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1"),delay:.1+index*.06,scrollTrigger:{trigger:lineWrapper,start:"top 150%"}})})})}function updateSplitText(){splitElements.forEach(split=>{split.split()})}window.addEventListener("resize",()=>{updateSplitText()});function initMenuLinkOpacity(){var projectItems=$(".home-project-item");projectItems.on("mouseenter",function(){var otherItems=projectItems.not(this);gsap.to(otherItems,{filter:"grayscale(100%)",duration:.3,ease:"power1.out"})});projectItems.on("mouseleave",function(){gsap.to(projectItems,{filter:"grayscale(0%)",duration:.3,ease:"power1.out"})})}function initProjectItem(){const images=document.querySelectorAll(".project-img");images.forEach(img=>{gsap.from(img,{y:"-29%",scrollTrigger:{trigger:img,start:"top bottom",end:"bottom top",scrub:.1,ease:"none"}})})}function initIndexItem(){const indexItems=document.querySelectorAll(".index-item");indexItems.forEach(item=>{const imgWrapper=item.querySelector(".index-item-img-wrapper");const img=item.querySelector("[index-img]");item.addEventListener("mouseover",()=>{if(window.innerWidth>992){gsap.killTweensOf(img);gsap.killTweensOf(imgWrapper);gsap.fromTo(img,{scale:1.4},{scale:1,duration:.5,ease:"ease.inOut"});gsap.fromTo(imgWrapper,{opacity:0,scale:.8},{opacity:1,scale:1,duration:.5,ease:"ease.inOut"});indexItems.forEach(otherItem=>{if(otherItem!==item){gsap.to(otherItem,{opacity:.3,duration:.2,ease:"ease.inOut"})}})}});item.addEventListener("mouseout",()=>{if(window.innerWidth>992){gsap.killTweensOf(img);gsap.killTweensOf(imgWrapper);gsap.to(img,{scale:1,duration:.3,ease:"ease.inOut"});gsap.to(imgWrapper,{opacity:0,duration:.3,ease:"ease.inOut"});indexItems.forEach(otherItem=>{if(otherItem!==item){gsap.to(otherItem,{opacity:1,duration:.2,ease:"ease.inOut"})}})}});window.addEventListener("resize",()=>{if(window.innerWidth<=992){img.style.scale=1;imgWrapper.style.opacity=1;imgWrapper.style.transform="scale(1)";indexItems.forEach(otherItem=>{otherItem.style.opacity=1})}else{img.style.scale=1;imgWrapper.style.opacity=0;imgWrapper.style.transform="scale(0.8)";indexItems.forEach(otherItem=>{otherItem.style.opacity=1})}gsap.killTweensOf(img);gsap.killTweensOf(imgWrapper)})})}function initProjectPageHero(){const projectHeroImg=document.querySelector(".project-hero-img");gsap.to(projectHeroImg,{duration:1.2,scale:1,delay:.4,ease:CustomEase.create("custom","M0,0,C0.16,1,0.30,1,1,1")});gsap.to(projectHeroImg,{y:0,scrollTrigger:{trigger:projectHeroImg,start:"top bottom",end:"bottom top",scrub:.1,ease:"none"}});window.addEventListener("resize",()=>{splitTitle.revert();splitNum.revert()})}function pageEnterAnimation(){return new Promise(resolve=>{const tl=gsap.timeline({onComplete:resolve});tl.set(".page-transition",{display:"block"}).to(".page-transition",{duration:1,y:"0%",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")}).fromTo(".page-content",{y:"0vh"},{duration:1,y:"-100vh",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")},"-=1").fromTo(".opacity-transition",{opacity:0,display:"block"},{opacity:.8,duration:1,ease:"linear",display:"none"},"-=1")})}function pageExitAnimation(){return new Promise(resolve=>{const tl=gsap.timeline({onComplete:resolve});tl.set(".page-transition",{y:"0%"}).to(".page-transition",{duration:1,y:"-100%",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")}).fromTo(".page-content",{y:"50vh"},{duration:1,y:"0vh",ease:CustomEase.create("custom","M0,0,C0.76,0,0.20,1,1,1")},"-=1").to(".opacity-transition",{duration:1,opacity:0,ease:"linear"},"-=1").set(".page-transition",{display:"none",y:"100%"})})}function updateCurrentClass(){$(".w-current").removeClass("w--current");$(".nav a").each(function(){if($(this).attr("href")===window.location.pathname){$(this).addClass("w--current")}})}function resetWebflow(data){let parser=new DOMParser;let dom=parser.parseFromString(data.next.html,"text/html");let webflowPageId=$(dom).find("html").attr("data-wf-page");if(window.Webflow){$("html").attr("data-wf-page",webflowPageId);if(window.Webflow.destroy){window.Webflow.destroy()}if(window.Webflow.ready){window.Webflow.ready()}let ix2Module=window.Webflow.require("ix2");if(ix2Module&&ix2Module.init){ix2Module.init()}}}barba.init({transitions:[{preventRunning:true,async leave(data){try{await pageEnterAnimation()}catch(error){}},enter(data){try{updateCurrentClass();$(data.next.container).addClass("fixed");resetWebflow(data);gsap.to(data.next.container,{onComplete:()=>{$(data.next.container).removeClass("fixed");$(window).scrollTop(0);pageExitAnimation();initLineLeftText();initRightText();initLinesText();initMenuLinkOpacity();initProjectItem();initIndexItem();initProjectPageHero();var videos=data.next.container.querySelectorAll("video");videos.forEach(function(video){video.play()})}})}catch(error){}}}]});